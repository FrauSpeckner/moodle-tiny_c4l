define("tiny_c4l/management",["exports","core_form/modalform","core/str","core/notification","core/ajax"],(function(_exports,_modalform,_str,_notification,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.deleteItem=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};function showModal(e,id,table){let title;e.preventDefault(),title=0==id?(0,_str.get_string)("additem","tiny_c4l"):(0,_str.get_string)("edititem","tiny_c4l");const modalForm=new _modalform.default({formClass:"tiny_c4l\\form\\management_"+table+"_form",args:{id:id},modalConfig:{title:title}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>location.reload())),modalForm.show()}_exports.init=async()=>{document.getElementsByClassName("add").forEach((element=>{element.addEventListener("click",(async e=>{showModal(e,element.dataset.id,element.dataset.table)}))})),document.getElementsByClassName("edit").forEach((element=>{element.addEventListener("click",(async e=>{showModal(e,element.dataset.id,element.dataset.table)}))})),document.getElementById("c4l_import").addEventListener("click",(async e=>{!function(e){e.preventDefault();let title=(0,_str.get_string)("import","tiny_c4l");const modalForm=new _modalform.default({formClass:"tiny_c4l\\form\\management_import_form",args:{},modalConfig:{title:title}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>location.reload())),modalForm.show()}(e)})),document.getElementsByClassName("delete").forEach((element=>{element.addEventListener("click",(async e=>{!function(e,id,title,table){e.preventDefault(),(0,_notification.deleteCancelPromise)((0,_str.get_string)("delete","tiny_c4l",title),(0,_str.get_string)("deletewarning","tiny_c4l")).then((async()=>{if(0!==id)try{if(await deleteItem(id,table)){const link=document.querySelector('[data-table="'+table+'"][data-id="'+id+'"]');if(link){link.closest(".item").remove()}}}catch(error){(0,_notification.exception)(error)}})).catch((()=>{}))}(e,element.dataset.id,element.dataset.title,element.dataset.table)}))}))};const deleteItem=(id,table)=>(0,_ajax.call)([{methodname:"tiny_c4l_delete_item",args:{id:id,table:table}}])[0];_exports.deleteItem=deleteItem}));

//# sourceMappingURL=management.min.js.map